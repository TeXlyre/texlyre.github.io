"use strict";(globalThis.webpackChunktexlyre=globalThis.webpackChunktexlyre||[]).push([[4558],{4605(e,r,n){n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"supported-lsp/harper-ls/index","title":"Recipe: harper-ls","description":"Harper LS (harper-ls) is an offline, privacy-first grammar and spelling checker","source":"@site/docs/supported-lsp/harper-ls/index.md","sourceDirName":"supported-lsp/harper-ls","slug":"/supported-lsp/harper-ls/","permalink":"/docs/supported-lsp/harper-ls/","draft":false,"unlisted":false,"editUrl":"https://github.com/texlyre/docs/tree/main/docs/supported-lsp/harper-ls/index.md","tags":[],"version":"current","frontMatter":{"title":"Recipe: harper-ls"},"sidebar":"tutorialSidebar","previous":{"title":"Supported LSP","permalink":"/docs/category/supported-lsp"},"next":{"title":"Recipe: vscode-langservers-extracted","permalink":"/docs/supported-lsp/vscode-langservers-extracted/"}}');var t=n(4848),l=n(8453);const a={title:"Recipe: harper-ls"},o="Harper LS (Grammar & Spelling)",i={},c=[{value:"1. Install the server",id:"1-install-the-server",level:2},{value:"2. Install the WebSocket proxy",id:"2-install-the-websocket-proxy",level:2},{value:"3. Run the server",id:"3-run-the-server",level:2},{value:"4. TeXlyre configuration",id:"4-texlyre-configuration",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"harper-ls-grammar--spelling",children:"Harper LS (Grammar & Spelling)"})}),"\n",(0,t.jsx)(r.p,{children:"Harper LS (harper-ls) is an offline, privacy-first grammar and spelling checker\nexposed as a Language Server. It works well for prose-heavy formats such as\nTeX, LaTeX, Typst, BibTeX, Markdown, and plain text."}),"\n",(0,t.jsx)(r.p,{children:"TeXlyre connects to Harper LS via WebSocket using lsp-ws-proxy."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"1-install-the-server",children:"1. Install the server"}),"\n",(0,t.jsx)(r.p,{children:"Harper LS is distributed via Cargo and requires the Rust toolchain."}),"\n",(0,t.jsx)(r.p,{children:"Install harper-ls:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"cargo install harper-ls --locked\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"2-install-the-websocket-proxy",children:"2. Install the WebSocket proxy"}),"\n",(0,t.jsx)(r.p,{children:"TeXlyre requires a WebSocket transport. lsp-ws-proxy bridges WebSocket to stdio."}),"\n",(0,t.jsx)(r.p,{children:"Install lsp-ws-proxy:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"cargo install lsp-ws-proxy --locked\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"3-run-the-server",children:"3. Run the server"}),"\n",(0,t.jsx)(r.p,{children:"Start the proxy and launch Harper LS over stdio:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"lsp-ws-proxy -l 127.0.0.1:7000 -- harper-ls --stdio\n"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"The proxy listens on ws://localhost:7000"}),"\n",(0,t.jsx)(r.li,{children:"Keep this process running while using TeXlyre"}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"4-texlyre-configuration",children:"4. TeXlyre configuration"}),"\n",(0,t.jsxs)(r.p,{children:["You can use ",(0,t.jsx)(r.strong,{children:"more than one LSP at the same time"}),". To do this, simply ",(0,t.jsx)(r.strong,{children:"add another config block below this one in the same list"}),".\nKeep everything inside the square brackets ",(0,t.jsx)(r.code,{children:"["})," ",(0,t.jsx)(r.code,{children:"]"})," and separate each  ",(0,t.jsx)(r.code,{children:"{"})," ",(0,t.jsx)(r.code,{children:"}"})," block with a comma."]}),"\n",(0,t.jsx)(r.p,{children:"Paste the following JSON into Settings \u2699\ufe0f \u2192 LSP \u2192 Generic LSP \u2192 LSP Configurations."}),"\n",(0,t.jsx)(r.p,{children:"This configuration maps all supported file types to the markdown language ID so\nHarper LS treats them consistently as prose."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'[\n  {\n    "id": "harper-ls",\n    "name": "Harper LS",\n    "enabled": true,\n    "fileExtensions": ["tex", "latex", "typ", "bib", "md", "txt"],\n    "languageIdMap": {\n      "tex": "markdown",\n      "latex": "markdown",\n      "typ": "markdown",\n      "bib": "markdown",\n      "md": "markdown",\n      "txt": "markdown"\n    },\n    "transportConfig": {\n      "type": "websocket",\n      "url": "ws://localhost:7000",\n      "contentLength": false\n    },\n    "clientConfig": "{\\"rootUri\\":\\"file:///\\",\\"workspaceFolders\\":[]}"\n  }\n]\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["If you change the proxy port, update ",(0,t.jsx)(r.code,{children:"transportConfig.url"})," accordingly."]}),"\n",(0,t.jsxs)(r.li,{children:["Harper LS provides diagnostics and code actions such as ignoring rules or\nadding words to a dictionary (currently, adding new words to the dictionary is functional but ",(0,t.jsx)(r.strong,{children:"NOT stable"})," in TeXlyre)."]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,r,n){n.d(r,{R:()=>a,x:()=>o});var s=n(6540);const t={},l=s.createContext(t);function a(e){const r=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(l.Provider,{value:r},e.children)}}}]);