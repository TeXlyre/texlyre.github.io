<svg xmlns="http://www.w3.org/2000/svg" width="1129" height="720" viewBox="0 0 1129 720">
  <title>Collaborative Editing</title>

  <!-- Browser Window -->
  <g id="browserWindow" transform="translate(150, 100)">
    <!-- Browser frame -->
    <rect x="0" y="0" width="800" height="500" rx="12" fill="#4a5568" stroke="#2d3748" stroke-width="2" />
    <rect x="5" y="5" width="790" height="490" rx="8" fill="#ffffff" />

    <!-- Browser header -->
    <rect x="5" y="5" width="790" height="40" rx="8" fill="#f7fafc" />
    <circle cx="25" cy="25" r="6" fill="#ff5f56" />
    <circle cx="45" cy="25" r="6" fill="#ffbd2e" />
    <circle cx="65" cy="25" r="6" fill="#27ca3f" />

    <!-- URL bar -->
    <rect x="100" y="15" width="600" height="20" rx="10" fill="#e2e8f0" />
    <text x="110" y="28" fill="#4a5568" font-size="11" font-family="Arial">texlyre.github.io/texlyre/#yjs:...</text>

    <!-- Main editor area (maximum width, no overlap) -->
    <rect x="15" y="55" width="530" height="430" rx="6" fill="#ffffff" stroke="#e2e8f0" stroke-width="1" />

    <!-- Comments panel (aligned to right edge) -->
    <rect x="555" y="55" width="230" height="430" rx="6" fill="#f8f9fa" stroke="#e2e8f0" stroke-width="1" />

    <!-- Comments panel header -->
    <rect x="565" y="65" width="210" height="25" rx="4" fill="#4a5568" />
    <text x="670" y="81" text-anchor="middle" fill="white" font-size="11" font-weight="bold" font-family="Arial">Comments</text>

    <!-- Comment 1 - Bob's comment -->
    <g transform="translate(570, 105)" opacity="0">
      <rect x="0" y="0" width="200" height="65" rx="6" fill="#fff5f5" stroke="#fed7d7" stroke-width="1" />
      <circle cx="15" cy="15" r="10" fill="#ff6b6b" />
      <text x="15" y="19" text-anchor="middle" fill="white" font-size="8" font-family="Arial">B</text>
      <text x="35" y="12" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Bob Smith</text>
      <text x="35" y="24" fill="#718096" font-size="8" font-family="Arial">2 min ago</text>
      <text x="10" y="40" fill="#4a5568" font-size="9" font-family="Arial">Great point about quantum mechanics!</text>
      <text x="10" y="52" fill="#4a5568" font-size="9" font-family="Arial">Could we add more details here?</text>
      <animate attributeName="opacity" values="0;0;1;1;1;1;1;1;1;1;1;1" dur="12s" repeatCount="indefinite" />
    </g>

    <!-- Comment 2 - Carol's response -->
    <g transform="translate(570, 180)" opacity="0">
      <rect x="0" y="0" width="200" height="50" rx="6" fill="#f0fffe" stroke="#b2f5ea" stroke-width="1" />
      <circle cx="15" cy="15" r="10" fill="#4ecdc4" />
      <text x="15" y="19" text-anchor="middle" fill="white" font-size="8" font-family="Arial">C</text>
      <text x="35" y="12" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Carol Jones</text>
      <text x="35" y="24" fill="#718096" font-size="8" font-family="Arial">1 min ago</text>
      <text x="10" y="40" fill="#4a5568" font-size="9" font-family="Arial">I agree! I'm working on the equations now.</text>
      <animate attributeName="opacity" values="0;0;0;0;1;1;1;1;1;1;1;1" dur="12s" repeatCount="indefinite" />
    </g>

    <!-- Comment 3 - Alice's new comment appearing -->
    <g transform="translate(570, 240)" opacity="0">
      <rect x="0" y="0" width="200" height="75" rx="6" fill="#e8f5e8" stroke="#c6f6d5" stroke-width="1" />
      <circle cx="15" cy="15" r="10" fill="#3ecc5f" />
      <text x="15" y="19" text-anchor="middle" fill="white" font-size="8" font-family="Arial">A</text>
      <text x="35" y="12" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Alice Chen</text>
      <text x="35" y="24" fill="#718096" font-size="8" font-family="Arial">just now</text>
      <text x="10" y="40" fill="#4a5568" font-size="9" font-family="Arial">I've added more context about applications.</text>
      <text x="10" y="52" fill="#4a5568" font-size="9" font-family="Arial">What do you think?</text>
      <animate attributeName="opacity" values="0;0;0;0;0;0;0;0;1;1;1;1" dur="12s" repeatCount="indefinite" />
    </g>

    <!-- Resolved comment -->
    <g transform="translate(570, 325)">
      <rect x="0" y="0" width="200" height="45" rx="6" fill="#f7fafc" stroke="#e2e8f0" stroke-width="1" opacity="0.7" />
      <circle cx="15" cy="15" r="10" fill="#718096" />
      <text x="15" y="19" text-anchor="middle" fill="white" font-size="8" font-family="Arial">B</text>
      <text x="35" y="12" fill="#718096" font-size="10" font-family="Arial" font-weight="bold">Bob Smith</text>
      <text x="35" y="24" fill="#a0aec0" font-size="8" font-family="Arial">resolved</text>
      <text x="10" y="40" fill="#718096" font-size="9" font-family="Arial">Fixed the typo in line 3</text>
      <line x1="10" y1="42" x2="190" y2="42" stroke="#cbd5e0" stroke-width="1" />
    </g>

    <!-- Comments counter and add button -->
    <g transform="translate(570, 385)">
      <rect x="0" y="0" width="200" height="25" rx="4" fill="#edf2f7" />
      <text x="100" y="17" text-anchor="middle" fill="#4a5568" font-size="9" font-family="Arial">3 active, 1 resolved</text>
    </g>

    <g transform="translate(570, 420)">
      <rect x="0" y="0" width="200" height="22" rx="11" fill="#3182ce" stroke="#2c5aa0" stroke-width="1" />
      <text x="100" y="15" text-anchor="middle" fill="white" font-size="9" font-family="Arial">+ Add Comment</text>
    </g>

    <!-- Document title -->
    <text x="30" y="85" fill="#2d3748" font-size="16" font-family="Arial" font-weight="bold">Collaborative Document</text>

    <!-- Text content with collaborative highlights and dynamic text changes -->
    <rect x="30" y="110" width="450" height="20" rx="3" fill="#e8f5e8" opacity="0.6">
      <animate attributeName="opacity" values="0.3;0.8;0.3" dur="8s" repeatCount="indefinite" />
    </rect>
    <!-- Alice's text that changes as she types -->
    <g id="aliceText">
      <text x="35" y="125" fill="#2d3748" font-size="12" font-family="Arial" opacity="1">Alice is editing this paragraph about quantum mechanics and its
        <animate attributeName="opacity" values="1;1;1;1;0;0;0;0" dur="8s" repeatCount="indefinite" />
      </text>
      <text x="35" y="125" fill="#2d3748" font-size="12" font-family="Arial" opacity="0">Alice is editing this paragraph about quantum mechanics and its applications in modern
        <animate attributeName="opacity" values="0;0;0;0;1;1;1;1" dur="8s" repeatCount="indefinite" />
      </text>
    </g>

    <rect x="30" y="140" width="520" height="20" rx="3" fill="#fff5f5" opacity="0.6">
      <animate attributeName="opacity" values="0.4;0.7;0.4" dur="4s" repeatCount="indefinite" />
    </rect>
    <text x="35" y="155" fill="#2d3748" font-size="12" font-family="Arial">Bob added this section on collaborative features and real-time synchronization...</text>

    <rect x="30" y="170" width="420" height="20" rx="3" fill="#f0fffe" opacity="0.6">
      <animate attributeName="opacity" values="0.2;0.9;0.2" dur="2.5s" repeatCount="indefinite" />
    </rect>
    <text x="35" y="185" fill="#2d3748" font-size="12" font-family="Arial">Carol is working on the mathematical equations in this area...</text>

    <!-- LaTeX equation area -->
    <rect x="30" y="210" width="500" height="80" rx="4" fill="#f8f9fa" stroke="#e2e8f0" stroke-width="1">
      <animate attributeName="stroke" values="#e2e8f0;#4ecdc4;#e2e8f0" dur="3s" repeatCount="indefinite" />
    </rect>
    <text x="40" y="230" fill="#4a5568" font-size="10" font-family="monospace">\begin{equation}</text>
    <!-- Animated equation changes synchronized with Carol's cursor -->
    <g>
      <!-- Stage 1: Original equation (cursor at beginning) -->
      <text x="60" y="250" fill="#2d3748" font-size="14" font-family="serif" font-style="italic" opacity="1">∫₀^∞ e^(-x²) dx = √π/2
        <animate attributeName="opacity" values="1;1;1;0;0;0;0;0;0;0;0;0" dur="12s" repeatCount="indefinite" />
      </text>
      <!-- Stage 2: Cursor at integral limits - changing from ₀^∞ to ₋∞^∞ -->
      <text x="60" y="250" fill="#2d3748" font-size="14" font-family="serif" font-style="italic" opacity="0">∫₋∞^∞ e^(-x²) dx = √π/2
        <animate attributeName="opacity" values="0;0;0;1;1;1;0;0;0;0;0;0" dur="12s" repeatCount="indefinite" />
      </text>
      <!-- Stage 3: Cursor at the end - changing result from √π/2 to √π -->
      <text x="60" y="250" fill="#2d3748" font-size="14" font-family="serif" font-style="italic" opacity="0">∫₋∞^∞ e^(-x²) dx = √π
        <animate attributeName="opacity" values="0;0;0;0;0;0;1;1;1;1;1;1" dur="12s" repeatCount="indefinite" />
      </text>
    </g>
    <text x="40" y="270" fill="#4a5568" font-size="10" font-family="monospace">\end{equation}</text>

    <!-- More content -->
    <rect x="30" y="310" width="380" height="20" rx="3" fill="#e8f5e8" opacity="0.6">
      <animate attributeName="width" values="380;420;380" dur="5s" repeatCount="indefinite" />
    </rect>
    <text x="35" y="325" fill="#2d3748" font-size="12" font-family="Arial">The conclusion discusses the implications of these findings...</text>

    <!-- Small chat popup in bottom right of editor -->
    <g id="chatPopup" transform="translate(320, 360)">
      <rect x="0" y="0" width="220" height="120" rx="8" fill="#ffffff" stroke="#e2e8f0" stroke-width="2" />
      <!-- Chat header -->
      <rect x="5" y="5" width="210" height="25" rx="6" fill="#4a5568" />
      <text x="110" y="21" text-anchor="middle" fill="white" font-size="10" font-weight="bold" font-family="Arial">Chat</text>
      <!-- Minimize button -->
      <circle cx="195" cy="17" r="6" fill="#718096" />
      <line x1="192" y1="17" x2="198" y2="17" stroke="white" stroke-width="1" />
      <!-- Online indicators -->
      <circle cx="20" cy="17" r="3" fill="#27ca3f" />

      <!-- Chat messages -->
      <g transform="translate(10, 40)">
        <!-- Bob's message -->
        <g opacity="0">
          <rect x="0" y="0" width="140" height="15" rx="8" fill="#ff6b6b" />
          <text x="8" y="11" fill="white" font-size="9" font-family="Arial">Bob: Should we add refs?</text>
          <animate attributeName="opacity" values="0;0;1;1;1;1;1;1" dur="12s" repeatCount="indefinite" />
        </g>

        <!-- Carol's response -->
        <g transform="translate(20, 20)" opacity="0">
          <rect x="0" y="0" width="120" height="15" rx="8" fill="#4ecdc4" />
          <text x="8" y="11" fill="white" font-size="9" font-family="Arial">Carol: Good idea!</text>
          <animate attributeName="opacity" values="0;0;0;0;1;1;1;1" dur="12s" repeatCount="indefinite" />
        </g>

        <!-- Alice typing -->
        <g transform="translate(0, 40)" opacity="0">
          <rect x="0" y="0" width="100" height="15" rx="8" fill="#e2e8f0" />
          <text x="8" y="11" fill="#666" font-size="9" font-family="Arial">Alice is typing...</text>
          <circle cx="80" cy="7" r="1" fill="#3ecc5f">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="0.6s" repeatCount="indefinite" />
          </circle>
          <circle cx="84" cy="7" r="1" fill="#3ecc5f">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="0.6s" repeatCount="indefinite" begin="0.2s" />
          </circle>
          <circle cx="88" cy="7" r="1" fill="#3ecc5f">
            <animate attributeName="opacity" values="0.3;1;0.3" dur="0.6s" repeatCount="indefinite" begin="0.4s" />
          </circle>
          <animate attributeName="opacity" values="0;0;0;0;0;0;1;0" dur="12s" repeatCount="indefinite" />
        </g>

        <!-- Alice's final message -->
        <g transform="translate(0, 40)" opacity="0">
          <rect x="0" y="0" width="160" height="15" rx="8" fill="#3ecc5f" />
          <text x="8" y="11" fill="white" font-size="9" font-family="Arial">Alice: Added more context!</text>
          <animate attributeName="opacity" values="0;0;0;0;0;0;0;1" dur="12s" repeatCount="indefinite" />
        </g>
      </g>

      <!-- Message input -->
      <rect x="10" y="95" width="160" height="18" rx="9" fill="#f7fafc" stroke="#e2e8f0" stroke-width="1" />
      <text x="15" y="107" fill="#a0aec0" font-size="9" font-family="Arial">Type a message...</text>
      <rect x="175" y="97" width="30" height="14" rx="7" fill="#3182ce" />
      <text x="190" y="106" text-anchor="middle" fill="white" font-size="8" font-family="Arial">Send</text>
    </g>

    <!-- Collaborative cursors with text-changing interaction -->
    <g id="cursor1">
      <!-- Alice's cursor moves and changes text as she types -->
      <line x1="385" y1="118" x2="385" y2="128" stroke="#3ecc5f" stroke-width="2">
        <animate attributeName="opacity" values="1;0;1" dur="1s" repeatCount="indefinite" />
        <!-- Cursor position synced with text changes -->
        <animateTransform attributeName="transform" attributeType="XML" type="translate" values="0,0; 0,0; 0,0; 0,0; 120,0; 120,0; 120,0; 120,0" dur="8s" repeatCount="indefinite" />
      </line>
      <polygon points="385,118 390,108 380,108" fill="#3ecc5f">
        <animateTransform attributeName="transform" attributeType="XML" type="translate" values="0,0; 0,0; 0,0; 0,0; 120,0; 120,0; 120,0; 120,0" dur="8s" repeatCount="indefinite" />
      </polygon>
      <rect x="391" y="106" width="45" height="16" rx="3" fill="#3ecc5f">
        <animateTransform attributeName="transform" attributeType="XML" type="translate" values="0,0; 0,0; 0,0; 0,0; 120,0; 120,0; 120,0; 120,0" dur="8s" repeatCount="indefinite" />
      </rect>
      <text x="413" y="117" text-anchor="middle" fill="white" font-size="9" font-family="Arial">Alice
        <animateTransform attributeName="transform" attributeType="XML" type="translate" values="0,0; 0,0; 0,0; 0,0; 120,0; 120,0; 120,0; 120,0" dur="8s" repeatCount="indefinite" />
      </text>
    </g>

    <g id="cursor2">
      <!-- Bob's cursor for commenting -->
      <line x1="515" y1="148" x2="515" y2="158" stroke="#ff6b6b" stroke-width="2">
        <animate attributeName="opacity" values="1;0;1" dur="1.5s" repeatCount="indefinite" />
      </line>
      <polygon points="515,148 520,138 510,138" fill="#ff6b6b" />
      <rect x="521" y="136" width="40" height="16" rx="3" fill="#ff6b6b" />
      <text x="541" y="147" text-anchor="middle" fill="white" font-size="9" font-family="Arial">Bob</text>
    </g>

    <!-- Carol's cursor synchronized with equation editing -->
    <g id="cursor3">
      <line x1="60" y1="242" x2="60" y2="252" stroke="#4ecdc4" stroke-width="2">
        <animate attributeName="opacity" values="1;0;1" dur="1s" repeatCount="indefinite" />
        <!-- Carol's cursor moves precisely with equation changes -->
        <!-- Position 1: At beginning of integral (60,242) -->
        <!-- Position 2: At integral limits (80,242) where ₀^∞ changes to ₋∞^∞ -->
        <!-- Position 3: At the end result (240,242) where √π/2 changes to √π -->
        <animateTransform attributeName="transform" attributeType="XML" type="translate"
          values="0,0; 0,0; 0,0; 20,0; 20,0; 20,0; 180,0; 180,0; 180,0; 180,0; 180,0; 180,0"
          dur="12s" repeatCount="indefinite" />
      </line>
      <polygon points="60,242 65,232 55,232" fill="#4ecdc4">
        <animateTransform attributeName="transform" attributeType="XML" type="translate"
          values="0,0; 0,0; 0,0; 20,0; 20,0; 20,0; 180,0; 180,0; 180,0; 180,0; 180,0; 180,0"
          dur="12s" repeatCount="indefinite" />
      </polygon>
      <rect x="66" y="230" width="45" height="16" rx="3" fill="#4ecdc4">
        <animateTransform attributeName="transform" attributeType="XML" type="translate"
          values="0,0; 0,0; 0,0; 20,0; 20,0; 20,0; 180,0; 180,0; 180,0; 180,0; 180,0; 180,0"
          dur="12s" repeatCount="indefinite" />
      </rect>
      <text x="88" y="241" text-anchor="middle" fill="white" font-size="9" font-family="Arial">Carol
        <animateTransform attributeName="transform" attributeType="XML" type="translate"
          values="0,0; 0,0; 0,0; 20,0; 20,0; 20,0; 180,0; 180,0; 180,0; 180,0; 180,0; 180,0"
          dur="12s" repeatCount="indefinite" />
      </text>
    </g>
  </g>

  <!-- Features Panel -->
  <g id="featuresPanel" transform="translate(150, 620)">
    <!-- Background panel -->
    <rect x="0" y="0" width="800" height="80" rx="8" fill="#f7fafc" stroke="#e2e8f0" stroke-width="1" />

    <!-- Feature 1: Real-time collaboration -->
    <g transform="translate(50, 20)">
      <circle cx="15" cy="15" r="12" fill="#3ecc5f" />
      <circle cx="12" cy="12" r="3" fill="#ffffff" />
      <circle cx="18" cy="12" r="3" fill="#ffffff" />
      <circle cx="15" cy="18" r="3" fill="#ffffff" />
      <text x="15" y="40" text-anchor="middle" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Real-time Sync</text>
    </g>

    <!-- Feature 2: Conflict resolution -->
    <g transform="translate(210, 20)">
      <circle cx="15" cy="15" r="12" fill="#3182ce" />
      <path d="M9 15 L13 19 L21 11" stroke="#ffffff" stroke-width="2" fill="none" stroke-linecap="round" />
      <text x="15" y="40" text-anchor="middle" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Auto Conflict Resolution</text>
    </g>

    <!-- Feature 3: Comments and chat -->
    <g transform="translate(395, 20)">
      <circle cx="15" cy="15" r="12" fill="#805ad5" />
      <rect x="10" y="10" width="10" height="10" rx="1" fill="#ffffff" />
      <rect x="11" y="11" width="8" height="1" fill="#805ad5" />
      <rect x="11" y="13" width="6" height="1" fill="#805ad5" />
      <rect x="11" y="15" width="8" height="1" fill="#805ad5" />
      <text x="15" y="40" text-anchor="middle" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Comments &amp; Chat</text>
    </g>

    <!-- Feature 4: Live cursors -->
    <g transform="translate(550, 20)">
      <circle cx="15" cy="15" r="12" fill="#d69e2e" />
      <line x1="12" y1="10" x2="12" y2="20" stroke="#ffffff" stroke-width="2" />
      <line x1="18" y1="12" x2="18" y2="18" stroke="#ffffff" stroke-width="2" />
      <text x="15" y="40" text-anchor="middle" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Live Cursors</text>
    </g>

    <!-- Feature 5: Secure sharing -->
    <g transform="translate(700, 20)">
      <circle cx="15" cy="15" r="12" fill="#f56500" />
      <rect x="11" y="12" width="8" height="6" rx="1" fill="#ffffff" />
      <circle cx="15" cy="11" r="2" fill="none" stroke="#ffffff" stroke-width="1.5" />
      <text x="15" y="40" text-anchor="middle" fill="#2d3748" font-size="10" font-family="Arial" font-weight="bold">Secure Sharing</text>
    </g>
  </g>
</svg>